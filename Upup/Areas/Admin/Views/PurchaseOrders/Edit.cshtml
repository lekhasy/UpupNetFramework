@{
    ViewBag.Title = "Edit";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
    var countShipping = 0;
    var prefixShipping = "Đang";
}

@using Upup.Helpers
@model Upup.Areas.Admin.ViewModels.PurchaseOrderDetailModel

<div class="manage-po-content">
    <section class="content-header">
        <h1>
            Quản lý đơn hàng <span class="code-color">#@Model.Code</span>
            <small>Preview</small>
        </h1>
        <ol class="breadcrumb">
            <li>@Html.ActionSiteMap("ProductsConsole", "Products", null, "Tổng quan", new { @class = "fa fa-dashboard" })</li>
            <li class="active">Quản lý đơn hàng</li>
        </ol>
    </section>

    <div class="row">
        <div class="col-md-8">
            <div class="content">
                <div class="box box-primary">
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-6 text-left">
                                <label>Đơn hàng chi tiết</label>
                            </div>
                            <div class="col-md-6 text-right">
                                <div class="state-color">@(Model.State == 4 ? prefixShipping + " " + StringHelper.GetPoStateByCode(Model.State) : StringHelper.GetPoStateByCode(Model.State))</div>
                            </div>
                        </div>
                        <div class="po-admin-item">
                            @foreach (var product in Model.Products)
                            {
                                if (product.State == 4)
                                {
                                    countShipping++;
                                }
                                if(countShipping == Model.Products.Count)
                                {
                                    prefixShipping = "Đã";
                                }
                                <div class="row">
                                    <div class="col-md-2">
                                        <img width="100" src="http://upup.com.vn/Images/products/@product.Product.Product.ImageUrl" />
                                    </div>
                                    <div class="col-md-2 text-center">
                                        @product.Product.VariantName
                                    </div>
                                    <div class="col-md-2">
                                        @product.Product.Price.ToString("N0")
                                    </div>
                                    <div class="col-md-1">
                                        x @product.Quantity
                                    </div>
                                    <div class="col-md-3">
                                        @Convert.ToDecimal(product.Product.Price * product.Quantity).ToString("N0") VNĐ
                                    </div>
                                    <div class="col-md-2">
                                        @StringHelper.GetPoStateByCode(product.State)
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="content">
                <div class="box box-primary">
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-5"><b>Tên khách hàng:</b></div>
                            <div class="col-md-7">@Model.Customer.FullName</div>
                        </div>
                        <div class="row">
                            <div class="col-md-5"><b>Số điện thoại:</b></div>
                            <div class="col-md-7">@Model.Customer.PhoneNumber</div>
                        </div>
                        <div class="row">
                            <div class="col-md-5"><b>Email:</b></div>
                            <div class="col-md-7">@Model.Customer.Email</div>
                        </div>
                        <div class="row">
                            <div class="col-md-5"><b>Địa chỉ:</b></div>
                            <div class="col-md-7">@Model.Customer.Address1</div>
                        </div>
                    </div>
                </div>
                <div class="box box-primary">
                    <div class="box-body">
                        <h3>Thông tin đơn hàng</h3>
                        <div class="row">
                            <div class="col-md-5"><b>Thời gian đặt:</b></div>
                            <div class="col-md-7">@Model.CreatedDate</div>
                        </div>
                        <div class="row">
                            <div class="col-md-5"><b>Tổng số tiền:</b></div>
                            <div class="col-md-7">@Model.TotalAmount.ToString("N0") VNĐ</div>
                        </div>
                        <div class="row">
                            <div class="col-md-5"><b>HT thanh toán:</b></div>
                            <div class="col-md-7">@StringHelper.GetPoPaymentMethodByCode(Model.PaymentCode)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>